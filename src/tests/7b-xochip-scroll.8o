# Scrolling test

# Description here

:include "../utils/helpers.8o"
:include "../utils/menu.8o"
:include "../utils/text-rendering.8o"

: main
  lores
  clear
  i := 0x1FF
  load v0
  if v0 == 1 then jump scrolling-lores
  if v0 == 2 then jump scrolling-hires

  text 11  3 scrolling-choose
  text 20 12 scrolling-str-lores
  text 20 17 scrolling-str-hires

  # Show version number in bottom right corner
  x := 50
  y := 27
  i := version-0-0
  sprite x y 4
  x := 58
  i := version-1-0
  sprite x y 4

  :unpack 0xA scrolling-menu
  v2 := 1
  jump menu-start

: scrolling-lores
	clear
	
  i := scrolling-arrow-left
  v0 := 45
  v1 := 23
  sprite v0 v1 8
	scroll-left
	scroll-left
	scroll-left
	scroll-left
	scroll-left
	scroll-left

  i := scrolling-arrow-right
  v0 := 10
  v1 := 12
  sprite v0 v1 8
	scroll-right
	scroll-right
	scroll-right

  i := scrolling-arrow-up
  v0 := 22
  v1 := 23
  sprite v0 v1 8
	scroll-up 12

  i := scrolling-arrow-down
  v0 := 33
  v1 := 0
  sprite v0 v1 8
	scroll-down 6

  i := scrolling-pixel
  v0 := 21	# X
  v1 := 26	# Y
	v2 := 15
	v3 := 4
  loop
    sprite v0 v1 1
    sprite v0 v2 1
		sprite v0 v3 1
    v0 += 1
    if v0 != 42 then
  again
  v0 := 20  # X
  v1 := 31
  v2 := 42
	v3 := 5  # Y
  loop
    sprite v0 v3 1
    sprite v1 v3 1
    sprite v2 v3 1
    v3 += 1
    if v3 != 26 then
  again

  v0 := key
  waitKeyRelease
  jump main

: scrolling-hires
	clear
	hires

  i := scrolling-arrow-left
  v0 := 77
  v1 := 46
  sprite v0 v1 8
	scroll-left
	scroll-left
	scroll-left
	scroll-left
	scroll-left
	scroll-left

  i := scrolling-arrow-right
  v0 := 42
  v1 := 35
  sprite v0 v1 8
	scroll-right
	scroll-right
	scroll-right

  i := scrolling-arrow-up
  v0 := 54
  v1 := 46
  sprite v0 v1 8
	scroll-up 12
  scroll-up 12

  i := scrolling-arrow-down
  v0 := 65
  v1 := 11
  sprite v0 v1 8
	scroll-down 12

  i := scrolling-pixel
  v0 := 53	# X
  v1 := 21	# Y
	v2 := 32
	v3 := 43
  loop
    sprite v0 v1 1
    sprite v0 v2 1
		sprite v0 v3 1
    v0 += 1
    if v0 != 74 then
  again
  v0 := 52  # X
  v1 := 63
  v2 := 74
	v3 := 22  # Y
  loop
    sprite v0 v3 1
    sprite v1 v3 1
    sprite v2 v3 1
    v3 += 1
    if v3 != 43 then
  again

  v0 := key
  waitKeyRelease
  jump main

:segment data

: scrolling-menu
  16 13 :pointer scrolling-lores
  16 18 :pointer scrolling-hires

: scrolling-choose
  str "PICK TARGET" 0
: scrolling-str-lores
  str "1 LORES" 0
: scrolling-str-hires
  str "2 HIRES" 0

: scrolling-arrow-left
  0b11111111
  0b11100111
  0b11001111
  0b10000001
  0b10000001
  0b11001111
  0b11100111
  0b11111111

: scrolling-arrow-right
  0b11111111
  0b11100111
  0b11110011
  0b10000001
  0b10000001
  0b11110011
  0b11100111
  0b11111111

: scrolling-arrow-up
  0b11111111
  0b11100111
  0b11000011
  0b10000001
  0b10100101
  0b11100111
  0b11100111
  0b11111111

: scrolling-arrow-down
  0b11111111
  0b11100111
  0b11100111
  0b10100101
  0b10000001
  0b11000011
  0b11100111
  0b11111111

: scrolling-pixel
  0b10000000

:include "../../pictures/version.png"
